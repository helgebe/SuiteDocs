---
Title: Настройка дополнительных параметров
Weight: 52
---

:author: likhobory
:email: likhobory@mail.ru

:toc:
:toc-title: Оглавление

:imagesdir: ./../../../images/ru/admin/AdvancedConfigurationOptions

ifdef::env-github[:imagesdir: ./../../../master/static/images/ru/admin/AdvancedConfigurationOptions]

= Настройка дополнительных параметров 

Системный администратор, имеющий доступ к файлам установленной SuiteCRM, имеет дополнительные возможности по настройке системы, описанные в этом разделе.

== Блокирование Мастера обновления и Конструктора модулей, а также блокирование создания резервных копий файлов системы 

Если вы как системный администратор управляете несколькими копиями SuiteCRM, то вы можете сохранить полный контроль над системами, путём запрета внесения изменений в систему всем пользователям с административными правами. (Здесь необходимо отметить, что не следует путать системного администратора, имеющего доступ к базе данных и к файлам системы, и пользователя SuiteCRM с административными правами). Для этого можно заблокировать доступ пользователей к Мастеру обновлений, Конструктору модулей, а также запретить создавать резервные копии файлов системы.
  
Для этого в файле `config.php` установите следующий параметр:
 
[source,php]
['admin_access_control'] => true

== Контроль загрузки модулей

Чтобы быть уверенным, что пользователи системы с административными правами (но не имеющие доступа к файлу конфигурации `config.php`) не могут загружать посторонние модули в систему, вы можете ограничить  загрузку файлов рамками конкретной, контролируемой вами папки. Это позволит вам контролировать все загружаемые в систему модули. 

Для контроля загрузки модулей выполните следующее:

В файле `config.php` установите следующие параметры: 

[source,php]
'use_common_ml_dir'=>'true',
'common_ml_dir'=>'ml_directory',

где *ml_directory*  - имя папки, из которой будет доступна загрузка модулей в систему. 

== Ограничение системных ресурсов

По умолчанию, любые обращения к базе данных, требующие выполнения более 1000 запросов, прерываются. Для операций импорта, экспорта, синхронизации и при работе в панели администрирования максимальное число запросов равняется 50,000. Таким образом, прерываются все процессы, занимающие слишком много системных ресурсов. Вы можете изменить эти настройки по своему усмотрению, указав значения для переменных `defaultpass:[_]limit` и `specialpass:[_]querypass:[_]limit` в файле `config.php`.

== Настройка прав доступа к файлам системы в ОС Linux

Если система работает на компьютере под управлением ОС Linux, то вы можете поменять владельца файлов системы, а также контролировать доступ ко всем файлам и папкам системы, путём настройки прав пользователя и группы. 

В следующем примере показана настройка прав чтения, записи и выполнения для пользователя и группы Apache:

[source,php]
'default_permissions' => array(
'dir_mode' => 02770,
'file_mode' => 0660,
'chown' => 'apache',
'chgrp' => 'apache',),

Для параметра `dirpass:[_]mode` можно установить значение 1528, которое является десятичным эквивалентом восьмеричного значения 02770. Для параметра `filepass:[_]mode` можно установить значение 432, которое является десятичным эквивалентом восьмеричного значения 0660. 

== Изменение расположения папки загрузок

Все файлы, загружаемые системой, хранятся в специальной папке загрузок, её расположение задаётся переменной 
`uploadpass:[_]dir` в файле `config.php`.  По умолчанию это папка upload, находящаяся в папке установленной системы.  
При необходимости её расположение может быть изменено, для этого в переменной `uploadpass:[_]dir` задайте абсолютный 
путь к новому расположению папки загрузок.

{{% notice note %}}
Не забудьте скопировать все файлы из старой папки загрузок в новую.
{{% /notice %}}

Новая папка должна быть доступна для записи пользователю, под которым запущен веб-сервер.

== Изменение расположения папки кэширования

В системе активно используется кэширование данных, что значительно повышает её производительность. Для хранения кэшированных данных (скомпилированных шаблонов, данных электронной почты и т.д.) используется специальная папка и её размер может быть достаточно велик. По умолчанию это папка cache, находящаяся в папке установленной системы.  При необходимости её расположение может быть изменено, для этого в переменной `cachepass:[_]dir`, расположенной в файле `config.php`, задайте абсолютный путь к новому расположению папки кэша. При этом на прежнем месте папки cache должна быть размещена ссылка, указывающая на новую папку кэша. Это необходимо для обеспечения доступа к некоторым закэшированным файлам системы.
Новая папка должна быть доступна для записи пользователю, под которым запущен веб-сервер.

== Постоянное отображение Расширенных фильтров в Формах списка

В SuiteCRM версии 7.8 вместо Базового и Расширенного поиска был введён более компактный 
функционал link:../../user/introduction/user-interface/search/#_Фильтр[фильтров]. 
Если вам все же необходимо постоянное отображение полей фильтра в верхней части Формы списка 
определённых модулей (как это было в более ранних версиях системы), добавьте соответствующий 
массив по аналогии со следующим примером (для модулей *Контрагенты*, *Пользователи* и *Сотрудники*) 
в файл `config.php`:

[source,php]
'enable_legacy_search' => 
  array (
    0 => 'Accounts',
    1 => 'Users',
    2 => 'Employees',  ),

либо соответствующие строки в файл `config_override.php`, например: 

[source,php]
$sugar_config['enable_legacy_search'][] = 'Accounts';
$sugar_config['enable_legacy_search'][] = 'Users';
$sugar_config['enable_legacy_search'][] = 'Employees';


== Субпанели: замена выпадающего меню на кнопки

При необходимости можно отображать функции той или иной субпанели не в виде пунктов выпадающего меню, а в виде кнопок.
На рисунке ниже показан пример стандартной субпанели *Мероприятия* и изменённой субпанели *ИСТОРИЯ* в модуле *Предварительные контакты*:

image:image1.png[Замена выпадающего меню на кнопки]

Для изменения субпанели *ИСТОРИЯ* выполните следующее:

 . Создайте файл `custom/Extension/modules/Leads/Ext/Layoutdefs/myCustomization.php`
 . Добавьте в него строку: 
 
[source,php]
$layout_defs['Leads']['subpanel_setup']['history']['flat'] = 1
 
[start=3]
 . Выполните link:../administration-panel/system/#_Восстановление[Быстрое восстановление].
 
== Быстрое редактирование пользовательского комбобокса
 
Если необходимо отредактировать комбобокс, созданный в link:../administration-panel/developer-tools/#_Редактор_комбобоксов[редакторе комбобоксов], то это можно сделать как при помощи редактора, так и прямым редактирование файла php, что может быть актуально при редактировании больших объёмов данных.  Например, для созданных в link:../administration-panel/developer-tools/#_Создание_динамического_комбобокса[этом примере] динамических комбобоксов, содержащих русскоязычные значения, необходимо отредактировать файл `/custom/include/language/ru_ru.lang.php`:

[source,php]
----
<?php
$GLOBALS['app_list_strings']['planet_list']=array (
  'mars' => 'МАРС',
  'jupiter' => 'ЮПИТЕР',
);
$GLOBALS['app_list_strings']['satellite_list']=array (
  'mars_deimos' => 'ДЕЙМОС',
  'mars_phobos' => 'ФОБОС',
  'jupiter_io' => 'ИО',
  'jupiter_europe' => 'ЕВРОПА',
  'jupiter_ganymede' => 'ГАНИМЕД',
  'jupiter_callisto' => 'КАЛЛИСТО',
);
----